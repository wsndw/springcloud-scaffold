# OAUTH2

### 简介        

​		**OAuth2**是一个关于授权的开放网络标准。单体结构中使用session+shiro+rides基本上可以解决大部分权限问题。但是微服务中，由于http协议是无状态的，不能很好的处理跨服务之间的权限问题，且session存在跨域问题。所以在Spring Cloud中大量使用，基于Spring Security的OAuth2来处理服务与服务之间的权限问题。

-----

### 应用场景

​		**oauth**实例：第三方网页使用QQ快捷登录

1. 用户在第三方网页需要登录

  		2. 点击登录，第三方网页跳转到QQ快捷登录页面
  		3. 用户输入QQ账户密码，点击授权
  		4. 跳转回第三方网页，登录成功

----

### OAuth思路

​		OAuth在"客户端"与"服务提供者"之间，设置了一个授权层。"客户端"不能直接登录"服务提供商"，只能登录授权层，以此将用户与客户端区分开来。"客户端"登录授权层所用的令牌，与用户的密码不同。用户可以在登录的时候，指定授权层令牌的权限范围和有效期。

​		"客户端"登录授权层以后，"服务提供商"根据令牌的权限范围和有效期，向"客户端"开放用户储存的资料。

----

### 运行流程

![image-20200411143548964](C:\Users\CQ\AppData\Roaming\Typora\typora-user-images\image-20200411143548964.png)



